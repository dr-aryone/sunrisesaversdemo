!function(){"use strict";var a={toggleMenu:function(){$(this).toggleClass("topnav-toggle-open"),$("#topnav_menu").slideToggle()},toggleSidebarItem:function(){$(this).find(".sidebar-toggle").toggleClass("sidebar-toggle-open"),$(this).find(".sidebar-submenu").slideToggle()},toggleSidebarSubItem:function(a){a.stopPropagation(),$(this).find(".sidebar-section-toggle").toggleClass("sidebar-section-toggle-open"),$(this).find(".sidebar-submenu-links").slideToggle()}};$("#topnav_toggle").on("click",a.toggleMenu),$(".sidebar-item").on("click",a.toggleSidebarItem),$(".sidebar-submenu-section").on("click",a.toggleSidebarSubItem)}(),function(){"use strict";var a=function(){var a=function(a){var b=$("#error_msg");Array.isArray(a)?b.find("span").html('<ul class="errors-list">'+a.join("")+"</ul>"):b.find("span").text(a),b.slideDown()},b=function(a){var b="";return b+="<strong>Product ID:</strong> "+a.product_id+"</strong><br>",b+="<strong>Title:</strong> "+a.title+"</strong><br>",b+="<strong>First Name:</strong> "+a.author.first_name+"</strong><br>",b+="<strong>Last Name:</strong> "+a.author.last_name+"</strong><br>",b+="<strong>MSRP:</strong> "+a.msrp+"</strong><br>",b+="<strong>Our Price:</strong> "+a.ourprice+"</strong><br>",b+="<strong>Tags:</strong> "+a.tags.join(", ")+"</strong><br>",b+="<strong>Pages:</strong> "+a.pages+"</strong><br>",b+="<strong>Year Published:</strong> "+a.publication.year+"</strong><br>",b+="<strong>Publisher:</strong> "+a.publication.publisher+"</strong><br>",b+="<strong>Type:</strong> "+a.publication.type+"</strong><br>",b+="<strong>Qty Stock:</strong> "+a.qty_stock+"</strong><br>"},c=function(a){var b=[];return a.find(":input").each(function(a,c){!$(c).val()&&$(c).data("name")&&b.push("<li><strong>"+$(c).data("name")+"</strong> is a required field</li>")}),b},d=function(a){a.preventDefault(),$(this).parent().fadeOut()},e=function(a){$("html, body").animate({scrollTop:a.offset().top})},f=function(a,b,c){b.find(".results").html(a),c.trigger("reset"),b.slideDown(),e(b)},g=function(a){a.preventDefault(),$("#search_results").slideUp(),e($("#search_title"))},h=function(c){c.preventDefault();var d=$(this),e=$("#search_results"),g=d.find("#book_id").val();e.slideUp(),$.get("/api/books/"+g).done(function(a){f(b(a),e,d)}).fail(function(){a("The requested book could not be found")})},i=function(c){c.preventDefault();var d=$(this),e=$("#search_results"),g=d.find("#publisher").val();e.slideUp(),$.get("/api/publishers/"+g).done(function(a){var c="";a.forEach(function(a){c+='<div class="results-book">'+b(a)+"</div>"}),f(c,e,d)}).fail(function(){a("No results found for this publisher")})},j=function(b){b.preventDefault();var d=$(this),f={},g=c(d);g.length?a(g):($.each(d.serializeArray(),function(a,b){f[b.name]=b.value}),$.post("/api/books",f).done(function(a){d.trigger("reset"),$("#success_text").html("<strong>"+a.title+"</strong> was successfully added!"),$("#success_msg").slideDown(),e($("#success_msg"))}).fail(function(){a("There was an error submitting the book")}))};return{addBook:j,msgClose:d,resultsClose:g,searchBooksById:h,searchBooksByPublisher:i}}();$(".msg-close").on("click",a.msgClose),$("#results_close").on("click",a.resultsClose),$("#search_id").on("submit",a.searchBooksById),$("#search_publisher").on("submit",a.searchBooksByPublisher),$("#add_book").on("submit",a.addBook)}();